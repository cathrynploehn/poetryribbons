function Poem(t,e){poemVar=this;var r,i,a,n,o,s,p;if("poem_submit"===t){n=$("#audio-file").attr("value"),a=[];var l=0;r=[],$("#originalLyrics-pane p span.line-content").each(function(){var t=$(this).text();""===t?r.push("ssss"):r.push(t),l>0&&a.push(100*(l-1)),l++}),i=[],$("#translatedLyrics-pane p span.line-content").each(function(){var t=$(this).text();""===t?i.push("ssss"):i.push(t)}),o=$("#first_name").text()+" "+$("#last_name").text(),p=$(".header-poem-title").text(),poemVar.author=o,poemVar.title=p,poemVar.filename=n,poemVar.originalLyrics=r,poemVar.translatedLyrics=i,poemVar.triggers=a;var u=p.replace(/\s+/g,""),c=$("#first_name").text(),h=$("#last_name").text();poemVar.poemkey="Anonymous"===c?c+"-"+u:h+"-"+c+"-"+u,e(this)}else t="./json/"+t+".json",$.getJSON(t,function(t){r=t.originalLyrics,i=t.translatedLyrics,a=t.triggers,n=t["filename-original"],o=t.author,p=t.title,s=t.translator}).done(function(){poemVar.author=o,poemVar.title=p,poemVar.filename=n,poemVar.originalLyrics=r,poemVar.translatedLyrics=i,poemVar.triggers=a,e()})}Poem.prototype.getAuthor=function(){var t=this.author;return t},Poem.prototype.getTitle=function(){var t=this.title;return t},Poem.prototype.getFilename=function(){var t=this.filename;return t},Poem.prototype.getOriginalLyrics=function(){var t=this.originalLyrics;return t},Poem.prototype.getTranslatedLyrics=function(){var t=this.translatedLyrics;return t},Poem.prototype.getTriggers=function(){var t=this.triggers;return t},Poem.prototype.setTriggers=function(t){this.triggers=t},Poem.prototype.getJSON=function(){var t='{ "poemkey": "'+this.poemkey+'","title": "'+this.title+'","author": "'+this.author+'","translator": "'+this.translator+'","filename-original": "'+this.filename+'","originalLyrics": [';return $.each(this.originalLyrics,function(e,r){t+='"'+r+'" ,'}),t=t.substring(0,t.length-1),t+="],",0!=this.translatedLyrics.length&&(t+='"translatedLyrics" :[',$.each(this.translatedLyrics,function(e,r){t+='"'+r+'" ,'}),t=t.substring(0,t.length-1),t+="],"),t+='"triggers": [ ',$.each(this.triggers,function(e,r){t+=r+","}),t=t.substring(0,t.length-1),t+="]}"},Poem.prototype.saveJSON=function(){var t=this.getJSON();alert(t);var e=JSON.parse(t);alert(e),$("body").append(t);"./json/"+this.poemkey+".json";$.ajax({type:"POST",url:"./poemsubmit.php",data:e,success:function(t){$("body").html(t)},error:function(t,e,r){alert(t),alert("Details: "+e+"\nError:"+r)}})};